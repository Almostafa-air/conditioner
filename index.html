<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>فني صيانة وتركيب التكييفات</title>
  <style>
    body {font-family: 'Cairo', sans-serif; margin:0; padding:0; background:#f9f9f9; color:#333;}
    h2 {color:#1e3c72;}
    section {padding:30px; margin:20px auto; max-width:900px; background:#fff; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.1);}
    #star-rating span {font-size:28px; cursor:pointer; color:#ccc;}
    #star-rating span.selected {color:gold;}
    #reviews-list {margin-top:20px;}
    .review-item {border-bottom:1px solid #ddd; padding:10px 0;}
    .review-stars {color:gold; font-size:20px;}
    textarea {width:100%; padding:10px; margin:10px 0; border:1px solid #ccc; border-radius:5px;}
    button {background:#1e3c72; color:#fff; padding:10px 20px; border:none; border-radius:5px; cursor:pointer;}
    button:hover {background:#16325c;}
    .rating-bar {margin:10px 0;}
    .progress {background:#eee; border-radius:5px; overflow:hidden; height:18px;}
    .progress span {display:block; height:100%; text-align:center; color:#fff; font-size:12px;}
    .green {background:#4caf50;}
    .blue {background:#2196f3;}
    .orange {background:#ff9800;}
    .red {background:#f44336;}
  </style>
</head>
<body>

  <header style="background:#1e3c72; color:#fff; padding:20px; text-align:center;">
    <h1>فني صيانة وتركيب التكييفات</h1>
  </header>

  <section id="reviews">
    <h2>آراء العملاء</h2>
    
    <!-- ملخص التقييم -->
    <div id="rating-summary">
      <h3>متوسط التقييم: <span id="average-rating">0</span>/5 ⭐</h3>
      <div class="rating-bar">رضا العملاء:
        <div class="progress"><span id="satisfaction" class="green" style="width:0%">0%</span></div>
      </div>
      <div class="rating-bar">سرعة الخدمة:
        <div class="progress"><span id="speed" class="blue" style="width:0%">0%</span></div>
      </div>
      <div class="rating-bar">جودة العمل:
        <div class="progress"><span id="quality" class="orange" style="width:0%">0%</span></div>
      </div>
      <div class="rating-bar">الأسعار العادلة:
        <div class="progress"><span id="pricing" class="red" style="width:0%">0%</span></div>
      </div>
    </div>

    <!-- نموذج إضافة تعليق -->
    <form id="review-form">
      <label>اختر التقييم:</label>
      <div id="star-rating">
        <span data-value="1">⭐</span>
        <span data-value="2">⭐</span>
        <span data-value="3">⭐</span>
        <span data-value="4">⭐</span>
        <span data-value="5">⭐</span>
      </div>
      <textarea id="review-text" placeholder="اكتب تعليقك هنا..."></textarea>
      <button type="submit">إضافة تعليق</button>
    </form>

    <!-- مكان عرض التعليقات -->
    <div id="reviews-list"></div>
  </section>

  <script>
    let reviews = [];
    let selectedStars = 0;

    // اختيار النجوم
    document.querySelectorAll('#star-rating span').forEach(star => {
      star.addEventListener('click', () => {
        selectedStars = star.getAttribute('data-value');
        document.querySelectorAll('#star-rating span').forEach(s => s.classList.remove('selected'));
        for (let i = 0; i < selectedStars; i++) {
          document.querySelectorAll('#star-rating span')[i].classList.add('selected');
        }
      });
    });

    // إضافة تعليق
    document.getElementById('review-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const text = document.getElementById('review-text').value;
      if (selectedStars > 0 && text.trim() !== "") {
        reviews.push({stars: parseInt(selectedStars), text: text});
        updateReviews();
        document.getElementById('review-text').value = "";
        selectedStars = 0;
        document.querySelectorAll('#star-rating span').forEach(s => s.classList.remove('selected'));
      }
    });

    // تحديث التعليقات والإحصائيات
    function updateReviews() {
      const list = document.getElementById('reviews-list');
      list.innerHTML = "";
      let totalStars = 0;
      reviews.forEach(r => {
        totalStars += r.stars;
        const div = document.createElement('div');
        div.classList.add('review-item');
        div.innerHTML = `<div class="review-stars">${'⭐'.repeat(r.stars)}</div><p>${r.text}</p>`;
        list.appendChild(div);
      });
      const avg = (totalStars / reviews.length).toFixed(1);
      document.getElementById('average-rating').innerText = avg;

      // تحديث نسب الرضا (مثال: توزيع عشوائي مبسط)
      document.getElementById('satisfaction').style.width = avg*20 + "%";
      document.getElementById('satisfaction').innerText = Math.round(avg*20) + "%";
      document.getElementById('speed').style.width = avg*18 + "%";
      document.getElementById('speed').innerText = Math.round(avg*18) + "%";
      document.getElementById('quality').style.width = avg*19 + "%";
      document.getElementById('quality').innerText = Math.round(avg*19) + "%";
      document.getElementById('pricing').style.width = avg*17 + "%";
      document.getElementById('pricing').innerText = Math.round(avg*17) + "%";
    }
  </script>

</body>
</html>
